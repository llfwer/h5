<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>jQuery测试</title>

    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,minimal-ui">
    <meta name="format-detection" content="telephone=no">

    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
            border: 0;
            font-family: 微软雅黑;
            /*移除A标签样式*/
            text-decoration: none;
        }

        /*文字不可选中*/
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        #layout {
            margin: 10px;
            /*display: flex;*/
            flex-direction: column;
        }

        #btn {
            width: 100px;
            height: 30px;
            text-align: center;
            background: #FFFFFF;
            border-radius: 10px;
            border: 1px #FF4900 solid;
        }

        #txt1 {
            height: 100px;
            background-color: #E6E6FA;
            text-align: center;
            line-height: 100px;
        }

        #txt2 {
            height: 100px;
            background-color: #E6E6FA;
            text-align: center;
            line-height: 100px;
        }

        .red {
            color: #FF4900;
        }

    </style>

    <script src="../mlib/jquery-min.js"></script>
    <script src="../mlib/tools.js"></script>
    <script type="text/javascript">

        //.html
        function test1() {
            $('#txt1').attr('style', 'color:red').html('Hello jQuery');
        }

        //判断传入的日期是否是今天
        function test2() {
            console.log(isToday('2017-03-10 15:31:22'));
            console.log(isToday('2017-02-10 15:31:22'));
            function isToday(str) {
                var target = new Date(str);
                var today = new Date();
                return target.setHours(0, 0, 0, 0) == today.setHours(0, 0, 0, 0);
            }
        }

        //hide() 和 show()
        function test3() {
            $('#txt2').hide();
            $('#btn').click(function () {
                $('#txt1').hide(1000, function () {
                    $('#txt2').show();
                });
            });
        }

        //toggle()
        function test4() {
            $('#btn').click(function () {
                $('#txt1').toggle();
            });
        }

        //fadeIn()
        function test5() {
            $('#txt1').hide();
            $('#btn').click(function () {
                $('#txt1').fadeIn(1000, function () {
                    console.log('我已经执行完成了');
                });
            });
        }

        //fadeIn()
        function test6() {
            $('#btn').click(function () {
                $('#txt1').fadeOut(1000, function () {
                    console.log('我已经执行完成了');
                });
            });
        }

        //fadeToggle()
        function test7() {
            $('#btn').click(function () {
                $('#txt1').fadeToggle(1000, function () {
                    console.log('我已经执行完成了');
                });
            });
        }

        //fadeTo()
        function test8() {
            $('#btn').click(function () {
                $('#txt1').fadeTo(1000, 0.5, function () {
                    $('#txt1').fadeTo(1000, 0.5);
                    console.log('我已经执行完成了');
                });
            });
        }

        //slideDown()
        function test9() {
            $('#txt1').hide();
            $('#btn').click(function () {
                $('#txt1').slideDown(1000, function () {
                    $('#txt2').slideToggle(1000);
                    console.log('我已经执行完成了');
                });
            });
        }

        //slideUp()
        function test10() {
            $('#txt2').hide();
            $('#btn').click(function () {
                $('#txt1').slideUp(1000, function () {
                    $('#txt2').slideToggle(1000);
                    console.log('我已经执行完成了');
                });
            });
        }

        //slideToggle()
        function test11() {
            $('#txt2').hide();
            $('#btn').click(function () {
                $('#txt1').slideToggle(1000, function () {
                    $('#txt2').slideToggle(1000);
                    console.log('我已经执行完成了');
                });
            });
        }

        //animate()
        function test12() {
            $('#d1').show();
            $('#btn').click(function () {
                $('#d1').animate({left: '+=100px', opacity: '0.5', width: '150px', height: '150px'});
            });
        }

        //animate() --> toggle
        function test13() {
            $('#d1').show();
            $('#btn').click(function () {
                $('#d1').animate({left: '100px', opacity: 'toggle', width: '+=10px', height: '+=10px'});
            });
        }

        //animate()队列
        function test14() {
            $('#d1').show();
            $('#btn').click(function () {
                var div = $("#d1");
                div.animate({height: '300px', opacity: '0.4'}, "slow");
                div.animate({width: '300px', opacity: '0.8'}, "slow");
                div.animate({height: '100px', opacity: '0.4'}, "slow");
                div.animate({width: '100px', opacity: '0.8'}, "slow");
            });
        }

        //stop()
        function test15() {
            $('#d1').show();
            $('#d1').click(function () {
                var div = $(this);
                div.animate({height: '300px', opacity: '0.4'}, "slow");
                div.animate({width: '300px', opacity: '0.8'}, "slow");
                div.animate({height: '100px', opacity: '0.4'}, "slow");
                div.animate({width: '100px', opacity: '0.8'}, "slow");
            });
            $('#btn').click(function () {
                $('#d1').stop(true, true);
            });
        }

        //text()回调 (html attr 同理)
        function test16() {
            $('#btn').click(function () {
                $('#txt1').text(function (index, oldText) {
                    //index为相同class的下表
                    return index + ' : ' + oldText;
                });
            });
        }

        //append()
        function test17() {
            $('#btn').click(function () {
                var txt1 = "<p>文本。</p>";              // 使用 HTML 标签创建文本
                var txt2 = $("<p></p>").text("文本。");  // 使用 jQuery 创建文本
                var txt3 = document.createElement("p");
                txt3.innerHTML = "文本。";               // 使用 DOM 创建文本 text with DOM
                $('#layout').append(txt1, txt2, txt3);        // 追加新元素
            });
        }

        //before() after()
        function test18() {
            $('#txt1').click(function () {
                $(this).before('<b>之前</b>');
            });
            $('#txt2').click(function () {
                $(this).after('<b>之后</b>');
            });
        }

        //remove() empty()
        function test19() {
            $('#txt1').click(function () {
                $(this).remove();//清除位置
            });
            $('#txt2').click(function () {
                $(this).empty();//还占位  还可以接受过滤条件
            });
        }

        //class操作
        function test20() {
            $('#btn').click(function () {
                $('#txt1').removeClass('red');
            });
            $('#txt1').click(function () {
                $(this).addClass('red');
            });
            $('#txt2').click(function () {
                $(this).toggleClass('red');
            });
        }

        //css方法
        function test21() {
            $('#txt1').click(function () {
                var methodList = getMethod($(this));
                for (var i = 0; i < methodList.length; i++) {
                    console.log(methodList[i].name + ' : ' + methodList[i].type);
                }
                console.log($(this).position().left);
                console.log($(this).css('background-color'));
            });
            $('#txt2').click(function () {
                $(this).css('background-color', '#FF4900');
            });
            $('#btn').click(function () {
                $('#txt1').css('background-color', '#FF4900', 'font-size', '50%');
            });
        }

        $(document).ready(test21);

        //遍历属性和方法
        function getMethod(obj) {
            var resultArr = [];
            for (p in obj) {
                var tempArr = {};
                tempArr.name = p;
                tempArr.type = typeof(obj[p]);
                resultArr.push(tempArr);
            }
            resultArr = sortA(resultArr);
            return resultArr;
        }

        function sortA(arr) {
            for (var i = 0; i < arr.length; i++) {
                for (var j = i; j < arr.length; j++) {
                    if (arr[i].name > arr[j].name) {
                        var temp = arr[i];
                        arr[i] = arr[j];
                        arr[j] = temp;
                    }
                }
            }
            return arr;
        }

    </script>
</head>

<body>
<div id="layout">
    <div id="btn" style="margin-left: 10px;margin-top: 10px">点我</div>
    <div id="txt1" style="margin-left: 10px;margin-top: 10px;word-wrap: break-word">谁是猴子派来的救兵?</div>
    <div id="txt2" style="margin-left: 10px;margin-top: 10px;margin-bottom: 10px">你就是猴子派来的救兵</div>
    <div id="d1"
         style="position: absolute;width: 100px;height: 100px;background-color: #FF4900;left: 10px;display: none"></div>
</div>
</body>
</html>